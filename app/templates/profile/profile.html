{% extends 'base.html' %}

{% block title %} {{ request.user.username }} Profile {% endblock %}

{% block content %}
    <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12 mb-5">
        <div class="section-block">
            <h5 class="section-title text-capitalize">{{ request.user.username }} Overview</h5>
            <h3>Hello, {{ profile_ctx }}</h3>
        </div>
        <div class="tab-vertical">
            <ul class="nav nav-tabs" id="myTab3" role="tablist">
                <li class="nav-item">
                    <a class="nav-link active" id="home-vertical-tab" data-toggle="tab" href="#home-vertical" role="tab"
                       aria-controls="home" aria-selected="true">Hello, I'm {{ request.user.username }}</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" id="profile-vertical-tab" data-toggle="tab" href="#profile-vertical"
                       role="tab"
                       aria-controls="profile" aria-selected="false">My Bio</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" id="order" data-toggle="tab" href="#orders"
                       role="tab"
                       aria-controls="contact" aria-selected="false">Other Information</a>
                </li>
            </ul>
            <div class="tab-content" id="myTabContent3">
                <div class="tab-pane fade show active" id="home-vertical" role="tabpanel"
                     aria-labelledby="home-vertical-tab">
                    {% if request.user.first_name %} <p>First Name: {{ request.user.first_name }} </p> {% endif %}
                    {% if request.user.last_name %}  <p>Last Name: {{ request.user.last_name }}  </p>{% endif %}
                    {% if profile_ctx.make_full_name %}  <p>Full Name:
                        {{ profile_ctx.make_full_name }}</p> {% endif %}
                    <p>NID: {{ request.user.nid_number }}</p>
                    {% if request.user.phone_number %}<p>Phone Number: {{ request.user.phone_number }}</p> {% endif %}
                    {% if request.user.email %} <p>Email Address: {{ request.user.email }}</p> {% endif %}
                    {% if request.user.address %} <p>Email Address: {{ request.user.address }}</p> {% endif %}
                    {% if request.user.last_login %} <p>Last Login: {{ request.user.last_login }}  </p> {% endif %}
                </div>
                <div class="tab-pane fade" id="profile-vertical" role="tabpanel" aria-labelledby="profile-vertical-tab">
                    <h3>Secondary Information</h3>
                    <div class="row">
                        <div class="col-md-6">
                            <p>Address: {{ profile_ctx.address }}</p>
                            <p>Word Number: {{ profile_ctx.word_number }}</p>
                            <p>Union: {{ profile_ctx.union }}</p>
                            <p>Date Of Birth: {{ profile_ctx.birth_date }}</p>
                            <p>Current Age: {{ profile_ctx.current_age }} Days</p>
                        </div>
                        <div class="col-md-6">
                            <img src="{{ profile_ctx.profile_picture }}" alt="{{ request.user.username }}">
                        </div>
                    </div>
                </div>
                <div class="tab-pane fade" id="orders" role="tabpanel" aria-labelledby="order">
                    <div class="card">
                        <h5 class="card-header">Others</h5>
                        <div class="card-body">
                            {% if order_list %}
                                <table class="table table-bordered">
                                    <thead>
                                    <tr>
                                        <th scope="col">Service Name</th>
                                        <th scope="col">Service Provider</th>
                                        <th scope="col">Price</th>
                                        <th scope="col">Contact</th>
                                        <th scope="col">Order Schedule</th>
                                        <th scope="col">Status</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    {% for obj in order_list %}
                                        <tr>
                                            <th>{{ obj.item }}</th>
                                            <td>{{ obj.item.owner.company_name }}</td>
                                            <td>{{ obj.item.price }}</td>
                                            <td>0{{ obj.item.owner.contact_number }}</td>
                                            <td>{{ obj.schedule }} {{ obj.schedule.date }} {{ obj.schedule.time }}</td>
                                            <td class="bg-success-light">Done</td>
                                        </tr>
                                    {% endfor %}
                                    </tbody>
                                </table>
                            {% else %}
                                <p>No nomination yet!</p>
                            {% endif %}
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>
{% endblock %}
